{% extends 'ccvo/base.html' %}
{% load static %}
{% block extra_css %} 
<link rel="stylesheet" href="{% static 'core/styles/ccvo/add_service_record_page.css' %}">
{% endblock extra_css %}
<title>{% block title %}Add Service Record{% endblock %}</title>

{% block content %}
<div class="container py-5">
{% if messages %}
  {% for message in messages %}
    <div class="alert 
        {% if message.tags == 'error' %}alert-danger
        {% elif message.tags == 'success' %}alert-success
        {% elif message.tags == 'warning' %}alert-warning
        {% else %}alert-info
        {% endif %}">
      {{ message }}
    </div>
  {% endfor %}
{% endif %}
    <!-- Search Client Section -->
    <div class="text-center search-pet-container rounded mb-5 p-4">
      <h5 class=" mb-3  font-weight-bold">üîç Pet</h5>
      <div class="search-bar">
        <form method="get" action="" class="mb-3">
          <input type="text" name="q" class="form-control" placeholder="Search for pet..." value="{{ request.GET.q }}">
        </form>
      </div>
      <div id="clientResult" class=" text-center">
        {% if pet %}
             <div class="card owner-card m-3">
                        <div class="card-body">
                            <div class="searched-pet mb-2">
                                {% if pet.pet_profile %}
                                <div class="img-container mb-3">
                                <img src="{{ pet.pet_profile.url }}" alt="avatar" class="rounded-circle me-2" width="72" height="72" style="object-fit: cover;">
                                </div>
                                {% endif %}
                                <div>
                                <span class="">{{ pet.name }} </span>
                                </div>
                                <div class="">
                                <span class="badge badge-info">{{pet.dog_id}}</span>
                                </div>
                                <div class="mb-3">
                                <span class="">{{pet.barangay}}</span>
                                </div>
                                <div class="ml-auto action-btn">
                               <a href=""><button class="view mb-2">View</button></a>
                               <a href="{% url 'add-service-record-form' pet.id %}"><button class="view">Select</button></a>
                               </div>
                            </div>
                        </div>
                   </div>
        {% endif %}
      </div>
    </div>

    <div class="w-100">
{% if selected_pet %}
         <div class="card owner-card selected-pet-container m-auto">
                        <div class="card-body  d-flex  justify-content-center w-100">
                            <div class=" align-items-center mb-2 text-center">
                              <div class="d-flex justify-content-center mb-3">
                                {% if selected_pet.pet_profile %}
                                <img src="{{ selected_pet.pet_profile.url }}" alt="avatar" class="rounded-circle me-2" width="40%"  style="object-fit: cover;">
                                {% endif %}
                                </div>
                                <span class="">{{ selected_pet.name }} </span>
                                <div class="">
                                  <span class="badge badge-info">{{selected_pet.dog_id}}</span>
                                </div>
                                <div class="">
                                    <span class="">{{ selected_pet.barangay }} </span>
                                </div>
                                
                            </div>
                        </div>
                   </div>
                         <form action="" method="POST" class="text-center mt-5">
        {% csrf_token %}
        <input type="hidden" name="selected_pet" value="{{selected_pet.id}}">
        <label for="service">Service:</label>
        <input list="service_list" id="service" name="service" class="form-control" placeholder="Type or select service">

        <datalist id="service_list">
            {% for s in services %}
                <option value="{{ s.name }}">
            {% endfor %}
        </datalist>
         <label for="date-administered">Date Administered:</label>
            <input type="date" id="date-administered" name="date-administered" class="form-control">

        <div class="d-flex justify-content-center">
        <button type="submit" class="btn submit-btn mb-4 mt-4 mr-0"><i class="fa-solid fa-check"></i> Add Record</button>
        </div>
      </form>
                   {% endif %}

      

    </div>
  

  </div>



{% endblock content %}