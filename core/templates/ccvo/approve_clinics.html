{% extends 'ccvo/base.html' %}
{% load static %}
{% block extra_css %} 
<link rel="stylesheet" href="{% static 'core/styles/ccvo/approve_clinics.css' %}">
{% endblock extra_css %}
{% block title %}Clinic Management{% endblock %}
{% block content %}
<div class="container py-5">

    <!-- Page Header -->
    <div class="text-center mb-5">
        <h2 class="display-5 font-weight-bold">
            <i class="fas fa-stethoscope mr-2"></i> Vet Clinic Management
        </h2>
    </div>

    <!-- ---------------- DESKTOP VIEW ---------------- -->
    <div class="d-none d-lg-block">

        <div class="mb-5">
            <h4 class="mb-3 pb-2">ðŸ•’ Pending Approval</h4>
            <hr>
            {% if pending_clinics %}
                <div class="row">
                    {% for clinic in pending_clinics %}
                    <div class="col-md-6 col-lg-4 mb-4">
                        <div class="card shadow-sm border-left border-warning">
                            <div class="card-body">
                                <h5 class="card-title font-weight-bold">
                                    <i class="fas fa-hospital mr-3"></i>{{ clinic.clinic_name }}
                                </h5>
                                <a href="{% url 'clinic-details' clinic.id %}">
                                    <button type="submit" class="btn btn-view btn-sm w-100">View</button>
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="alert alert-warning text-center">
                    There are no clinics waiting for approval.
                </div>
            {% endif %}
        </div>

        <!-- Section 2: Registered Clinics -->
        <div>
            <h4 class="mb-3 pb-2 h4-approve">âœ… Approved Vet Clinics</h4>
            <hr>
            {% if approved_clinics %}
                <div class="row">
                    {% for clinic in approved_clinics %}
                    <div class="col-md-6 col-lg-4 mb-4">
                        <div class="card shadow-sm border-left border-success">
                            <div class="card-body">
                                <h5 class="card-title font-weight-bold d-inline">
                                    <i class="fas fa-hospital mr-3"></i>{{ clinic.clinic_name }}
                                </h5>
    
                                          {% if clinic.is_approved and clinic.is_operating %}
                                <span class="badge float-right">Oparating</span>
                                {% elif not clinic.is_operating and not clinic.is_requesting_access %}
                                <span class="badge not-operating float-right">Not Operating</span>
                                {% elif clinic.is_requesting_access %}
                                 <span class="badge requesting-access float-right">Requesting Access</span>
                                {% endif %}
                                <a href="{% url 'clinic-details' clinic.id %}">
                                    <button type="submit" class="btn btn-view btn-sm w-100 mt-3">View</button>
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="alert alert-secondary text-center">
                    No approved clinics found yet.
                </div>
            {% endif %}
        </div>
    </div>

    <!-- ---------------- MOBILE VIEW ---------------- -->
    <div class="d-lg-none">
        <!-- Tabs -->
        <ul class="nav nav-tabs mb-3" id="clinicTabs" role="tablist"
            style="border-radius: 12px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="pending-tab" data-toggle="tab" href="#pending" 
                   role="tab" aria-controls="pending" aria-selected="true">
                   Waiting Approval
                </a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="approved-tab" data-toggle="tab" href="#approved" 
                   role="tab" aria-controls="approved" aria-selected="false">
                   Approved
                </a>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="clinicTabsContent">
            <!-- Pending Clinics -->
            <div class="tab-pane fade show active" id="pending" role="tabpanel">
                {% if pending_clinics %}
                    <div class="d-flex flex-column">
                        {% for clinic in pending_clinics %}
                        <div class="card shadow-sm border-left border-warning mb-3">
                            <div class="card-body">
                                <h5 class="card-title font-weight-bold">
                                    <i class="fas fa-hospital mr-3"></i>{{ clinic.clinic_name }}
                                </h5>
                                <a href="{% url 'clinic-details' clinic.id %}">
                                    <button type="submit" class="btn btn-view btn-sm w-100">View</button>
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="alert alert-warning text-center">
                        There are no clinics waiting for approval.
                    </div>
                {% endif %}
            </div>

            <!-- Approved Clinics -->
            <div class="tab-pane fade" id="approved" role="tabpanel">
                {% if approved_clinics %}
                    <div class="d-flex flex-column">
                        {% for clinic in approved_clinics %}
                        <div class="card shadow-sm border-left border-success mb-3">
                            <div class="card-body">
                                <h5 class="card-title font-weight-bold">
                                    <i class="fas fa-hospital mr-3"></i>{{ clinic.clinic_name }}
                                </h5>
                    
                                {% if clinic.is_approved and clinic.is_operating %}
                                <span class="badge float-right">Oparating</span>
                                {% elif not clinic.is_operating and not clinic.is_requesting_access %}
                                <span class="badge not-operating float-right">Not Operating</span>
                                  {% elif clinic.is_requesting_access %}
                                 <span class="badge requesting-access float-right">Requesting Access</span>
                                {% endif %}
                                <a href="{% url 'clinic-details' clinic.id %}">
                                    <button type="submit" class="btn btn-view btn-sm w-100 mt-3">View</button>
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="alert alert-secondary text-center">
                        No approved clinics found yet.
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

</div>
{% endblock content %}
