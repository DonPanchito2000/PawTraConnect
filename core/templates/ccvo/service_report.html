
{% extends 'ccvo/base.html' %}
{% load static %}
{% block extra_css %} 
<link rel="stylesheet" href="{% static 'core/styles/ccvo/service_report.css' %}">
{% endblock extra_css %}
<title>{% block title %}Service Report{% endblock %}</title>

{% block content %}

<div class="container">
  <div class="arrow-back mb-4 ml-5 mt-5">
                    <a href="{% url 'services-page' %}" class="arrow-back">
                        <i class="fas fa-arrow-left mr-2"></i> Back
                    </a>
                
                </div>
<div class="service-name">
<h2>{{ service.name }} Report</h2>
</div>
<!-- ðŸ”¹ Year Filter -->
 <div class="form-container">
<form method="get" class="form-inline mb-3">
  <label for="year" class="mr-2">Select Year:</label>
  <select name="year" id="year" class="form-control mr-2">
    {% for y in years %}
      <option value="{{ y }}" {% if y == selected_year %}selected{% endif %}>
        {{ y }}
      </option>
    {% endfor %}
  </select>
  <button type="submit" class="btn btn-view ">View</button>
</form>
</div>
<!-- ðŸ”¹ Report Table -->
 <div class="table-responsive mb-4">
<table class="table table-bordered text-center report-table">
  <thead class="thead-custom">
    <tr>
      <th>Barangay</th>
      <th>Total Registered Pets</th>
      <th>Pets Availed This Service</th>
      <th>% Vaccinated</th>
    </tr>
  </thead>
  <tbody>
    {% for row in report %}
      <tr>
        <td>{{ row.barangay }}</td>
        <td>{{ row.registered }}</td>
        <td>{{ row.availed }}</td>
        <td>{{ row.percentage }}%</td>
      </tr>
    {% empty %}
      <tr>
        {% if selected_year %}
        <td colspan="4">No records found for {{ selected_year }}</td>
        {% else %}
        <td colspan="4">No records found</td>
        {% endif %}
      </tr>
    {% endfor %}
  </tbody>
</table>
</div>

</div>
{% endblock content %}