{% extends 'owner/base.html' %}

{% load static %}
{% block extra_css %} 
<link rel="stylesheet" href="{% static 'core/styles/owner/club.css' %}">
{% endblock extra_css %}
<title>{% block title %}Forum{% endblock %}</title>


{% block content %} 
<div class="container mt-5">
<!-- Tabs for small screens -->
<ul class="nav nav-tabs d-lg-none mb-3" id="clubTabs" role="tablist" style="border-radius: 12px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
  <li class="nav-item" role="presentation">
    <a class="nav-link active" id="my-clubs-tab" data-toggle="tab" href="#my-clubs" role="tab" aria-controls="my-clubs" aria-selected="true">My Clubs</a>
  </li>
  <li class="nav-item" role="presentation">
    <a class="nav-link" id="clubs-tab" data-toggle="tab" href="#clubs" role="tab" aria-controls="clubs" aria-selected="false">Clubs</a>
  </li>
</ul>
</div>



       <div class="row mt-5 d-none d-lg-flex">
        <!-- MY CLUBS -->
        <div class="col-lg-5 mb-sm-5 mb-lg-0"> 
            <div class="card myclubs-card shadow rounded-3 p-4 h-100">
                <h5 class="">My Clubs</h5>
                <div class="clubs">
                       {% for user_club in user_clubs %}
                       <a href="{% url 'club-profile-page' user_club.club.id %}">
                   <div class="card club-card m-3 text-dark">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                {% if user_club.club.user.profile_picture %}
                                <img src="{{ user_club.club.user.profile_picture.url }}" alt="avatar" class="rounded-circle me-2" width="72" height="72" style="object-fit: cover;">
                                {% endif %}
                                <span class="ml-2">{{ user_club.club.club_name }}</span>
                                <!-- <span class="text-light">{{ user_club.joined_at }}</span> -->
                                <!-- <small class="ms-auto text-light">{{ room.created|timesince }} ago</small> -->
                            </div>
                        </div>
                   </div>
                   </a>
                   {% empty %}
                     <p class="text-light">You are not a member of any club.</p>
                   {% endfor %}
                </div>
             
            </div>
        </div>

        <!-- CLUBS -->
          <div class="col-lg-7"> 
            <div class="card clubs-container shadow rounded-3 p-4 h-100">
                <h5 class="">Clubs</h5>

            <!-- Search Bar -->
             <div class="search-bar">
                    <form method="get" action="" class="mb-3">
                    <input type="text" name="q" class="form-control" placeholder="Search for rooms..." value="{{ request.GET.q }}">
                    </form>
             </div>

                <div class="clubs">
                       {% for club in clubs %}
                   <div class="card club-card club m-3">
                        <a href="{% url 'club-profile-page' club.id %}">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                {% if club.user.profile_picture %}
                                <img src="{{ club.user.profile_picture.url }}" alt="avatar" class="rounded-circle me-2" width="72" height="72" style="object-fit: cover;">
                                {% endif %}
                                
                                <span class="ml-2">{{ club.club_name }}</span>
                           
                                <div class="ml-auto">

                                    <span class="member-count"><i class="fas fa-users"></i> {{ club.approved_members_count }} Members</span>
            

                    
                               </div>
                            
                            
                                
                            </div>
                        </div>
                        </a>
                   </div>
                   {% endfor %}
                </div>
             
            </div>
        </div>


    </div>
    
  
<!-- âœ… Tab content for small screens -->
<div class="tab-content d-lg-none" id="dashboardTabsContent">

  <!-- Registered Pets Tab -->
  <div class="tab-pane fade show active" id="my-clubs" role="tabpanel" aria-labelledby="pets-tab">
        <div class="card myclubs-card shadow rounded-3 p-4 h-100">
                <h5 class="mb-1">My Clubs</h5>
                <div class="clubs">
                       {% for user_club in user_clubs %}
                       <a href="{% url 'club-profile-page' user_club.club.id %}">
                   <div class="card club-card m-3 text-dark">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                {% if user_club.club.user.profile_picture %}
                                <img src="{{ user_club.club.user.profile_picture.url }}" alt="avatar" class="rounded-circle me-2" width="72" height="72" style="object-fit: cover;">
                                {% endif %}
                                <span class="ml-2">{{ user_club.club.club_name }}</span>
                                <!-- <span class="text-light">{{ user_club.joined_at }}</span> -->
                                <!-- <small class="ms-auto text-light">{{ room.created|timesince }} ago</small> -->
                            </div>
                        </div>
                   </div>
                   </a>
                   {% empty %}
                     <p class="text-light">You are not a member of any club.</p>
                   {% endfor %}
                </div>
             
            </div>
  </div>

  <!-- Dashboard Tab -->
  <div class="tab-pane fade" id="clubs" role="tabpanel" aria-labelledby="overview-tab">
 <div class="card clubs-container shadow rounded-3 p-4 h-100">
                <h5 class="mb-1">Clubs</h5>

            <!-- Search Bar -->
             <div class="search-bar">
                    <form method="get" action="" class="mb-3">
                    <input type="text" name="q" class="form-control" placeholder="Search for rooms..." value="{{ request.GET.q }}">
                    </form>
             </div>

                <div class="clubs">
                       {% for club in clubs %}
                   <div class="card club-card club m-3">
                        <a href="{% url 'club-profile-page' club.id %}">
                        <div class="card-body">
                          <div class="d-flex align-items-center mb-2 flex-wrap w-100">
                                {% if club.user.profile_picture %}
                                <img src="{{ club.user.profile_picture.url }}" 
                                    alt="avatar" 
                                    class="rounded-circle me-2 mb-2 mb-sm-0" 
                                    width="72" height="72" 
                                    style="object-fit: cover;">
                                {% endif %}

                                <div class="d-flex justify-content-between align-items-center flex-grow-1 flex-wrap">
                                    <span class="ml-2 font-weight-bold text-truncate">
                                        {{ club.club_name }}
                                    </span>
                                    <small class="ml-auto mt-1 mt-sm-0">
                                        <i class="fas fa-users"></i> {{ club.approved_members_count }} Members
                                    </small>
                                </div>
                            </div>
                        </div>
                        </a>
                   </div>
                   {% endfor %}
                </div>
             
            </div>
  </div>

</div>

{% endblock content %}
